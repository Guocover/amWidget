define(function(t,e,n){"use strict";function o(t){t.ele.style["-webkit-user-select"]="none",r(t.ele,"touchend touchmove touchcancel",function(){var t=this,e=t.getAttribute("data-active-class")||"active";t.classList.remove(e)}),r(t.ele,"touchstart",function(){if(!(t.timeLock>0&&t.isLocked===!0)){var e,n=this,o=n.getAttribute("data-active-class")||"active";n.classList.add(o);var i=function(){clearTimeout(e),a(n,"touchmove",i),a(n,"touchcancel",i),a(n,"touchend",u)},u=function(){t.queue.tap.length&&(t.timeLock>0&&(t.isLocked=!0,!!t.autoDisabled&&n.setAttribute("disabled","disabled"),t.lsto=setTimeout(function(){t.unlock()},t.timeLock)),s(t.queue.tap,function(t,e){try{l(e)&&e.call(n)}catch(o){console&&console.error(o)}})),i()};r(n,"touchmove",i),r(n,"touchcancel",i),r(n,"touchend",u),e=setTimeout(i,500)}})}function i(t){var e=document.querySelectorAll(t);return u(e)}function u(t){var e=[];return s(t,function(n){e.push(t.item(n))}),e}function c(t){var e;return s(h,function(n,o){return o.ele===t?(e=o,!1):void 0}),e}function r(t,e,n,o){var i="string"===v(e)?e.split(" "):[];s(i,function(e,i){t.addEventListener(i,n,!!o)})}function a(t,e,n,o){t.removeEventListener(e,n,!!o)}function s(t,e){for(var n=0;n<t.length;n++){var o=e.call(null,n,t[n]);if(o===!1)break}}function l(t){return"function"===v(t)}function f(t){return"htmlcollection"===v(t)||"nodelist"===v(t)}function d(t){return/^html.+element$/i.test(v(t))}function v(t){return Object.prototype.toString.call(t).replace(/\[object (\w+)\]/,"$1").toLowerCase()}r(document,"DOMContentLoaded",function(){p("[data-active-class]")});var p=function(t,e){var n=[],o=[];"string"===v(t)?n=i(t):f(t)?n=u(t):d(t)&&(n=[t]),s(n,function(t,n){var i=m(n);i.tap(e),o.push(i)});var c=["tap","unlock"];return s(c,function(t,e){o[e]=function(){var t=arguments;return s(this,function(n,o){o[e].apply(o,t)}),this}}),o};p.setTimeLock=function(t){m.prototype.timeLock=t},p.setAutoDisabled=function(t){m.prototype.autoDisabled=t};var h=[],m=function(t){var e,n=this,i=f(t)?t.item(0):t;return n instanceof m?(n.ele=i,n.queue={tap:[]},n.isLocked=!1,n.lsto=null,o(n),h.push(n),e=n):e=c(i)||new m(t),e};m.prototype.timeLock=0,m.prototype.autoDisabled=!1,m.prototype.tap=function(t,e,n){return"boolean"===v(t)&&(n=t,t=void 0,e=void 0),"number"===v(t)&&(n=e,e=t,t=void 0),l(t)&&this.queue.tap.indexOf(t)<0&&this.queue.tap.push(t),"number"===v(e)&&(this.timeLock=e),"boolean"===v(n)&&(this.autoDisabled=n),this},m.prototype.unlock=function(){var t=this;clearTimeout(t.lsto),t.isLocked=!1,!!t.autoDisabled&&t.ele.removeAttribute("disabled")};var b=p;n.exports=b});