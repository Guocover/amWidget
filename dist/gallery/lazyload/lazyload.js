window.AW=window.AW||{},function(){"use strict";var t={options:{auto:!0,offsetPre:10,lazyAttr:"data-src"},matchStack:[],init:function(e){var n=document.querySelector("body").getAttribute("data-lazy");if(n=t._setOptions(t._parseObj(n)),this.options=this._extend(this.options,n),this._setOptions(e),this.runLock=!0,this.options.auto){var o=document.querySelectorAll("img["+this.options.lazyAttr+"]");this.add(o),this.run()}},run:function(){this.runLock&&(this.runLock=!1,this._loadFactory(),window.addEventListener("scroll",this._loadFactory,!1),window.addEventListener("resize",this._loadFactory,!1),window.addEventListener("orientchange",this._loadFactory,!1))},add:function(t){this._lazyStack(t)},_setOptions:function(t){this.options=this._extend(this.options,t)},_extend:function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t},_parseObj:function(t){try{return new Function("return "+t)()}catch(e){return{}}},_lazyStack:function(t){switch(typeof t){case"object":if(1===t.nodeType)if("IMG"===matchStach.nodeName){var e=[];Array.prototype.push.call(e,t),t=e}else matchStach=matchStach.querySelectorAll(this.options.lazyAttr);break;case"string":t=document.querySelectorAll(t)}t.length&&t.length>0&&("Array"!==t.constructor.name&&(t=Array.prototype.slice.call(t)),this.matchStack=this.matchStack.concat(t))},_loadFactory:function(){var t=AW.lazyload.matchStack;if(0!==t.length)for(var e=0;e<t.length;e++){var n=t[e];AW.lazyload._isNeedLoad(n)&&(AW.lazyload._lazyimgReplace(n),t.splice(e,1),e--)}},_isNeedLoad:function(t){var e={width:window.innerWidth,height:window.innerHeight},n=this.options.offsetPre,o={top:0,left:0,bottom:0,right:0};return"undefined"!=typeof t.getBoundingClientRect&&(o=t.getBoundingClientRect()),o.bottom+n>=0&&o.top-n<e.height&&o.right+n>=0&&o.left-n<e.width},_lazyimgReplace:function(t){var e=this.options.lazyAttr;t.src=t.getAttribute(e),t.removeAttribute(e)}};document.addEventListener("DOMContentLoaded",function(){t.init(),t.run()},!1),window.AW.lazyload=t}();