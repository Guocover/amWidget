define(function(t,i,o){"use strict";var a=navigator.userAgent,e={attr:{isIn:a.indexOf("AlipayClient")>=0,version:function(){var t=[].concat(a.match(/AlipayClient\/([^\s]+)/)||"")[1]||"";return""!=t&&(t=parseFloat(t)),t}()},callBridge:function(){var t=arguments,i=function(){var i=window.AlipayJSBridge;i.call.apply(i,t)};window.AlipayJSBridge?i():document.addEventListener("AlipayJSBridgeReady",function(){i()},!1)},checkJSAPI:function(t,i){("undefined"==typeof t||""===t)&&i(!1),this.attr.version<8.1&&i("tradePay"===t||"startApp"===t||"titlebar"===t||"toolbar"===t||"showLoading"===t||"hideLoading"===t||"toast"===t||"login"===t||"sendSMS"===t||"contact"===t?!0:!1),this.callBridge("checkJSAPI",{api:t},function(t){i(t.available)})},callApi:function(){"alert"===s.options.type?this.callBridge("alert",{title:s.options.title,message:s.options.message,button:s.options.okButton},function(){var t={};t.ok=!0,s.callback(t)}):"confirm"===s.options.type&&AlipayJSBridge.call("confirm",{title:s.options.title,message:s.options.message,okButton:s.options.okButton,cancelButton:s.options.cancelButton},function(t){s.callback(t)})}},n={init:function(){"true"===s.options.callContainer&&e.attr.isIn?e.checkJSAPI(s.options.type,function(t){t?e.callApi():this.setCSS().setHTML().show()}):this.setCSS().setHTML().show()},isSetCSS:!1,setCSS:function(){var t=this;if(!t.isSetCSS){var i=document.createElement("style");i.dataset.amwid="dialog",i.innerHTML=this.CSSText(),document.head.appendChild(i),t.isSetCSS=!0}return this},isSetHTML:!1,setHTML:function(){var t=this.HTMLText().replace("<%dialog-title%>",s.options.title);if(t=t.replace("<%dialog-message%>",s.options.message),this.isSetHTML)this.dialogDom.innerHTML=t;else{var i=document.createElement("div");i.className="am-dialog am-dialog-hide",i.innerHTML=t,document.body.appendChild(i),this.dialogDom=i;var o=document.createElement("div");o.className="am-dialog-mask am-dialog-mask-hide",document.body.appendChild(o),this.dialogMaskDom=o,this.isSetHTML=!0}return this.setButton(),this},setButton:function(){var t=this,i=this.cancelButtonHTMLText().replace("<%dialog-cancelButton%>",s.options.cancelButton),o=this.okButtonHTMLText().replace("<%dialog-okButton%>",s.options.okButton);if("alert"===s.options.type?this.dialogDom.querySelector(".am-dialog-button-container").innerHTML=o:"confirm"===s.options.type&&(this.dialogDom.querySelector(".am-dialog-button-container").innerHTML=i+o),"confirm"===s.options.type){var a=function(){var i={};i.ok=!1,s.callback(i),t.hide()};this.dialogDom.querySelector("#J-dialog-cancel").addEventListener("click",a,!1)}var e=function(){var t={};t.ok=!0,s.callback(t)};this.dialogDom.querySelector("#J-dialog-ok").addEventListener("click",e,!1)},show:function(){this.hide(),this.dialogDom.classList.remove("am-dialog-hide"),this.dialogDom.classList.add("am-dialog-show"),this.dialogMaskDom.classList.remove("am-dialog-mask-hide"),this.dialogMaskDom.classList.add("am-dialog-mask-show")},hide:function(){this.dialogDom&&(this.dialogDom.classList.remove("am-dialog-show"),this.dialogDom.classList.add("am-dialog-hide"),this.dialogMaskDom.classList.remove("am-dialog-mask-show"),this.dialogMaskDom.classList.add("am-dialog-mask-hide"))}},s={};s.options={title:"",message:"",type:"alert",okButton:"确定",cancelButton:"取消",callContainer:!0},s.callback=function(){},s.show=function(t,i){if("object"==typeof t){for(var o in t)this.options[o]=t[o];t.title&&""!==t.title||(this.options.title=""),t.type&&""!==t.type||(this.options.type="alert"),t.okButton&&""!==t.okButton||(this.options.okButton="确定"),t.cancelButton&&""!==t.cancelButton||(this.options.cancelButton="取消")}else"string"==typeof t&&(this.options.message=t,this.options.title="",this.options.type="alert",this.options.okButton="确定",this.options.cancelButton="取消");this.callback="function"==typeof i?i:null,n.init()},s.alert=function(t,i){var o={};o.type="alert",o.message=t,s.show(o,i)},s.confirm=function(t,i){var o={};o.type="confirm",o.message=t,s.show(o,i)},s.hide=function(){n.hide()},n.CSSText=function(){var t=".am-dialog{-webkit-box-sizing:border-box;-ms-box-sizing:border-box;box-sizing:border-box;position:fixed;top:45%;z-index:101;width:100%;padding:0 20px;margin-top:-80px}.am-dialog-show,.am-dialog-mask-show{display:block;}.am-dialog-hide,.am-dialog-mask-hide{display:none;}.am-dialog p{margin:14px 0 24px 0;text-align:center}.am-dialog-title{padding-top:7px;text-align:center;font-weight:700}.am-dialog-content{margin:auto;max-width:320px;padding:10px;background:#e8e8e8;border-radius:8px}.am-dialog-mask{position:fixed;top:0;left:0;z-index:99;width:100%;height:100%;background:rgba(0,0,0,0.5)}";return t},n.HTMLText=function(){var t='<div class="am-dialog-content">    <div class="am-dialog-title"><%dialog-title%></div>    <p><%dialog-message%></p>    <div class="am-dialog-button-container am-flexbox am-flexbox-average"></div></div>';return t},n.maskHTMLText=function(){var t='<div class="am-dialog-mask"></div>';return t},n.cancelButtonHTMLText=function(){var t='<div class="am-flexbox-item"><button type="button" id="J-dialog-cancel"  class="am-button am-button-white"><%dialog-cancelButton%></button></div>';return t},n.okButtonHTMLText=function(){var t='<div class="am-flexbox-item"><button type="button" id="J-dialog-ok" class="am-button am-button-blue"><%dialog-okButton%></button></div>';return t},o.exports=s});